-- LocalScript (e.g. under StarterPlayerScripts)

local player   = game.Players.LocalPlayer
local filename = player.Name .. ".txt"
local found    = false

local pets = {
    "The Overlord",
    "Diamond Hexarium",
    "Royal Trophy",
    "King Pufferfish"
}

local function checkpet(name)
    for _, petName in ipairs(pets) do
        if name == petName then
            return true
        end
    end
    return false
end

-- shortcut to the scrolling frame
local invScroll = player.PlayerGui.ScreenGui.Inventory.Frame
    .Inner.Pets.Main.ScrollingFrame

-- 1) scan inventory pets
for _, petFrame in ipairs(invScroll.Pets:GetChildren()) do
    if petFrame:IsA("Frame") then
        local nameText = petFrame.Inner.Button.Inner.DisplayName.Text
        if checkpet(nameText) then
            found = true
        end
    end
end

-- 2) scan team entries
for _, teamItem in ipairs(invScroll.Team.Main.List:GetChildren()) do
    if teamItem:IsA("Frame") then
        local nameText = teamItem.Inner.Button.Inner.DisplayName.Text
        if checkpet(nameText) then
            found = true
        end
    end
end

local function GetGems()
    local txt = player.PlayerGui.ScreenGui.HUD.Left.Currency.Gems.Frame.Label.Text
    local digits = txt:gsub("%D", "")
    return tonumber(digits) or 0
end

if found and GetGems() >= 100000000 then
    writefile(filename, "Yummytool")
    print("Done: conditions met and file written.")
else
    print("Not meet")
end
